apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: backend-main-dev                       # ì•± ì´ë¦„ (Argo CD UIì—ì„œ ë³´ì„)
  namespace: argocd                            # Argo CDê°€ ì„¤ì¹˜ëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
spec:
  project: default                             # Argo CD Project (ê¸°ë³¸ ì‚¬ìš©)
  source:
    repoURL: https://github.com/100-hours-a-week/19-Respec-Infra.git   # ğŸ” ì—¬ê¸°ë¥¼ ì‹¤ì œ Git ë¦¬í¬ì§€í† ë¦¬ ì£¼ì†Œë¡œ ìˆ˜ì •
    targetRevision: main                       # Git ë¸Œëœì¹˜
    path: helm/backend-main                    # Helm Chart ê²½ë¡œ
    helm:
      valueFiles:
        - values/dev.yaml                      # ğŸ”¥ dev í™˜ê²½ìš© ê°’
  destination:
    server: https://kubernetes.default.svc     # í´ëŸ¬ìŠ¤í„° ë‚´ ê¸°ë³¸ ì£¼ì†Œ (Argo CDê°€ ë‚´ë¶€ ë°°í¬ìš©ìœ¼ë¡œ ì”€)
    namespace: backend-dev                     # ğŸ”¥ ì‹¤ì œ dev ì•±ì´ ë°°í¬ë  ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  syncPolicy:
    automated:
      selfHeal: true                           # ì¿ ë²„ ë¦¬ì†ŒìŠ¤ê°€ ë°”ë€Œë©´ Git ê¸°ì¤€ìœ¼ë¡œ ë˜ëŒë¦¼
      prune: true                              # Gitì— ì—†ì–´ì§„ ë¦¬ì†ŒìŠ¤ëŠ” ì‚­ì œ
